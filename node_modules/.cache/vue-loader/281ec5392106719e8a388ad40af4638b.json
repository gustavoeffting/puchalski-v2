{"remainingRequest":"/home/gustavo/workspace/puchalski/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/gustavo/workspace/puchalski/src/App.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/home/gustavo/workspace/puchalski/src/App.vue","mtime":1673558154914},{"path":"/home/gustavo/workspace/puchalski/node_modules/css-loader/dist/cjs.js","mtime":1651338534801},{"path":"/home/gustavo/workspace/puchalski/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1651338529857},{"path":"/home/gustavo/workspace/puchalski/node_modules/postcss-loader/src/index.js","mtime":1651338528501},{"path":"/home/gustavo/workspace/puchalski/node_modules/vuetify-loader/lib/loader.js","mtime":1651338529589},{"path":"/home/gustavo/workspace/puchalski/node_modules/cache-loader/dist/cjs.js","mtime":1651338534497},{"path":"/home/gustavo/workspace/puchalski/node_modules/vue-loader/lib/index.js","mtime":1651338529133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCiNtYWluLWNvbnRlbnQgewogIGJhY2tncm91bmQ6IHVybCgnLi9hc3NldHMvYmFja2dyb3VuZC5wbmcnKSBuby1yZXBlYXQgY2VudGVyIGNlbnRlci9jb3ZlcjsKICBmb250LWZhbWlseTogJ1dvcmsgU2FucycsIHNhbnMtc2VyaWY7Cn0KCnNwYW4gewogIGNvbG9yOiAjMWUxNTU5Owp9CgojbWFpbi1jb250ZW50IC5ob21lIHsKICBoZWlnaHQ6IDkwdmg7Cn0KCi5mcy0yMCB7CiAgZm9udC1zaXplOiAyMHB4Owp9CgouZnMtMjUgewogIGZvbnQtc2l6ZTogMjVweDsKfQoKLmZzLTMwIHsKICBmb250LXNpemU6IDMwcHg7Cn0KCi5mcy0zNSB7CiAgZm9udC1zaXplOiAzNXB4Owp9CgouZnMtMTAwIHsKICBmb250LXNpemU6IDEwMHB4Owp9CgouYmxvY2sgewogIGRpc3BsYXk6IGJsb2NrOwp9CgojbWFpbi1jb250ZW50IC5idG4tc2VhcmNoIHsKICBtYXJnaW46IDAgMCAzMHB4IDIwcHg7Cn0KCi5iYWNrYmx1ciB7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjMpOwogIGJhY2tkcm9wLWZpbHRlcjogYmx1cigxMHB4KTsKICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDsKICBtYXJnaW46IDVweDsKICBib3JkZXItcmFkaXVzOiA1cHg7Cn0KCkBtZWRpYSAobWF4LXdpZHRoOiA2MDBweCkgewogICNtYWluLWNvbnRlbnQgLmJ0bi1zZWFyY2ggewogICAgbWFyZ2luOiAwIDAgMzBweCAwOwogICAgd2lkdGg6IDEwMCU7CiAgfQp9Cg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyNA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <v-app id=\"main-content\">\n    <v-container>\n      <v-row :class=\"[temperature ? '' : 'home']\" align=\"center\" no-gutters>\n        <v-col>\n          <v-row v-if=\"!temperature\" no-gutters>\n            <v-col cols=\"12\">\n              <span class=\"fs-35 block text-center\">Previsão do tempo</span>\n            </v-col>\n          </v-row>\n          <v-row align=\"center\" justify=\"center\" class=\"pt-4\" no-gutters>\n            <v-col cols=\"12\" sm=\"8\">\n              <search-box :comboboxItems=\"items\" @set-address=\"setAddress\"></search-box>\n            </v-col>\n            <v-col cols=\"12\" sm=\"2\">\n              <v-btn\n                @click=\"getLocationInfo\"\n                class=\"btn-search\"\n                outlined\n                x-large\n                elevation=\"2\"\n                color=\"#1e1559\"\n              >\n                Buscar\n              </v-btn>\n            </v-col>\n          </v-row>\n        </v-col>\n      </v-row>\n      <v-row v-if=\"temperature\" no-gutters>\n        <v-col cols=\"12\">\n          <v-row class=\"mb-10\" no-gutters>\n            <v-col cols=\"12\">\n              <div>\n                <span class=\"fs-100 block text-center\"><b> {{ temperature }}°C </b></span>\n                <span class=\"fs-25 block text-center\"><b> {{ weather }} </b></span>\n                <span class=\"fs-25 block text-center\"> {{ location }} </span>\n                <span class=\"fs-25 block text-center\"> {{ currentDate }} </span>\n              </div>\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col cols=\"12\">\n              <v-row class=\"backblur\" no-gutters>\n                <v-col>\n                  <span class=\"fs-20 block text-center\">Previsão</span>\n                </v-col>\n              </v-row>\n              <v-row v-for=\"item in forecast\" :key=\"item.id\" align=\"center\" class=\"backblur\" no-gutters>\n                <v-col cols=\"6\">\n                  <span class=\"fs-30 block text-center\"> {{ item.date }} </span>\n                </v-col>\n                <v-col cols=\"6\">\n                  <span class=\"fs-20 block text-center\"> {{ item.temperature }}°C<br> {{ item.weather }} </span>\n                </v-col>\n              </v-row>\n            </v-col>\n          </v-row>\n        </v-col>\n      </v-row>\n    </v-container>\n  </v-app>\n</template>\n\n<script>\nimport { getWeather, getLocation } from \"./services.js\"\nexport default {\n  name: 'App',\n  components: {\n    SearchBox: () => import(\"./components/SearchBox.vue\")\n  },\n  data: () => ({\n    address: null,\n    temperature: null,\n    weather: null,\n    location: null,\n    currentDate: null,\n    forecast: [],\n    comboBoxModel: null,\n    items: []\n  }),\n  mounted () {\n    const storedSearches = JSON.parse(localStorage.getItem('storedSearches'))\n\n    if (storedSearches) {\n      this.items = storedSearches\n    }\n  },\n  methods: {\n    async getLocationInfo () {\n      if (!this.address.trim()) {\n        return\n      }\n\n      if (!this.items.includes(this.address)) {\n        this.items.push(this.address)\n        localStorage.setItem('storedSearches', JSON.stringify(this.items))\n      }\n\n      const storedCoordinatesList = JSON.parse(localStorage.getItem('storedCoordinatesList')) ? JSON.parse(localStorage.getItem('storedCoordinatesList')) : []\n\n      const storedCoordinate = storedCoordinatesList.find((item) => item.address === this.address)\n\n      if (storedCoordinate) {\n        this.getWeatherInfo(storedCoordinate.lat, storedCoordinate.lng)\n      } else {\n        const { results } = await getLocation(this.address)\n        if (results.length === 0) {\n          alert('Não encontrado')\n          return\n        }\n\n        const geocode = {\n          \"address\": this.address,\n          \"lat\": results[0].geometry.location.lat,\n          \"lng\": results[0].geometry.location.lng\n        }\n\n        storedCoordinatesList.push(geocode)\n        localStorage.setItem('storedCoordinatesList', JSON.stringify(storedCoordinatesList))\n\n        this.getWeatherInfo(results[0].geometry.location.lat,results[0].geometry.location.lng)\n      }\n    },\n    async getWeatherInfo (lat, lng) {\n      const today = new Date()\n      const dd = String(today.getDate()).padStart(2, '0')\n      const mm = String(today.getMonth() + 1).padStart(2, '0')\n      const year = String(today.getYear())\n      this.currentDate = dd + '/' + mm\n\n      const currentHour = dd + '/' + mm + '/' + year + ' - ' + today.getHours()\n\n      const storedWeather = JSON.parse(sessionStorage.getItem('storedWeather')) ? JSON.parse(sessionStorage.getItem('storedWeather')) : []\n      let findCacheWeather = false\n\n      if (storedWeather) {\n        storedWeather.forEach((item) => {\n          if (item.lastQuery == currentHour && item.lat == lat && item.lng == lng) {\n            this.temperature = item.temperature\n            this.weather = item.weather\n            this.location = item.location\n            findCacheWeather = true\n          }\n        })\n      }\n\n      if (findCacheWeather === false) {\n        const data = await getWeather(lat,lng)\n        this.temperature = Math.round(data.main.temp)\n        this.weather = data.weather[0].description\n        this.location = data.name\n\n        const weatherInfo = {\n          \"lastQuery\": currentHour,\n          \"temperature\": Math.round(data.main.temp),\n          \"weather\": data.weather[0].description,\n          \"location\": data.name,\n          \"lat\": lat,\n          \"lng\": lng\n        }\n\n        storedWeather.push(weatherInfo)\n        sessionStorage.setItem('storedWeather', JSON.stringify(storedWeather))\n      }\n\n      const storedForecast = JSON.parse(sessionStorage.getItem('storedForecast')) ? JSON.parse(sessionStorage.getItem('storedForecast')) : []\n      let findCacheForecast = false\n\n      if (storedForecast) {\n        storedForecast.forEach((item) => {\n          if (item.lastQuery == currentHour && item.lat == lat && item.lng == lng) {\n            this.forecast = item.forecast\n            findCacheForecast = true\n          }\n        })\n      }\n\n      if (findCacheForecast === false) {\n        const data = await getWeather(lat, lng)\n        const forecast = []\n\n        const forecastList = data.list.filter( element => {\n          return element.dt_txt.substring(11,13) === '12' // weather at 12h\n        })\n\n        let i = 0\n        for (let item of forecastList) {\n          forecast.push({\n                          'id': i, \n                          'date': item.dt_txt.substring(8,10) + '/' + item.dt_txt.substring(5,7),\n                          'weather': item.weather[0].description,\n                          'temperature': Math.round(item.main.temp)\n                        })\n          i++\n        }\n\n        this.forecast = forecast\n\n        const forecastInfo = {\n          \"lastQuery\": currentHour,\n          \"lat\": lat,\n          \"lng\": lng,\n          \"forecast\": forecast\n        }\n\n        storedForecast.push(forecastInfo)\n        sessionStorage.setItem('storedForecast', JSON.stringify(storedForecast))\n      }\n    },\n    setAddress(address) {\n      this.address = address\n    }\n  }\n}\n</script>\n<style type=\"text/css\">\n#main-content {\n  background: url('./assets/background.png') no-repeat center center/cover;\n  font-family: 'Work Sans', sans-serif;\n}\n\nspan {\n  color: #1e1559;\n}\n\n#main-content .home {\n  height: 90vh;\n}\n\n.fs-20 {\n  font-size: 20px;\n}\n\n.fs-25 {\n  font-size: 25px;\n}\n\n.fs-30 {\n  font-size: 30px;\n}\n\n.fs-35 {\n  font-size: 35px;\n}\n\n.fs-100 {\n  font-size: 100px;\n}\n\n.block {\n  display: block;\n}\n\n#main-content .btn-search {\n  margin: 0 0 30px 20px;\n}\n\n.backblur {\n  background-color: rgba(255, 255, 255, 0.3);\n  backdrop-filter: blur(10px);\n  border: 1px solid transparent;\n  margin: 5px;\n  border-radius: 5px;\n}\n\n@media (max-width: 600px) {\n  #main-content .btn-search {\n    margin: 0 0 30px 0;\n    width: 100%;\n  }\n}\n</style>"]}]}